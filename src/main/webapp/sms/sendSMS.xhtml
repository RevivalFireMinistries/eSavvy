<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="#{request.contextPath}/template.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="content">
        <h:form prependId="false">


            <h3>Send SMS</h3>
            <p:panel header="Send SMS" footer="Visca el Barca!">

                   <p:growl id="growl4" sticky="true" showDetail="true"/>

                   <p:wizard flowListener="#{smsBean.onFlowProcess}"  style="width:600px;" >

                   <p:tab id="assemblies" title="Select Assemblies">

                       <p:panel header="Assemblies">

                           <h:messages errorClass="error"/>
                           <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">

                               <h:outputText value="Select Assembly(s):" />
                               <p:selectManyCheckbox id="grid1" value="#{smsBean.selectedAssemblies}" layout="grid" columns="1" converter="assemblyConverter">
                                   <f:selectItems value="#{smsBean.assemblyList}" var="asssembly" itemLabel="#{asssembly.name}" itemValue="#{asssembly}" />
                               </p:selectManyCheckbox>


                               <h:outputText value="Skip to last: " />
                               <h:selectBooleanCheckbox value="#{smsBean.skip}" />
                           </h:panelGrid>
                       </p:panel>
                   </p:tab>
                       <p:tab id="groups" title="Groups">

                           <p:panel header="Select Groups">

                               <h:messages errorClass="error"/>
                               <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">

                                   <h:outputText value="Select Group(s):" />
                                   <p:selectManyCheckbox id="grid" value="#{smsBean.selectedGroups}" layout="grid" columns="3" converter="groupConverter">
                                       <f:selectItems value="#{smsBean.groupList}" var="group" itemLabel="#{group}" itemValue="#{group}" />
                                   </p:selectManyCheckbox>


                                   <h:outputText value="Skip to last: " />
                                   <h:selectBooleanCheckbox value="#{smsBean.skip}" />
                               </h:panelGrid>
                           </p:panel>
                       </p:tab>
                       <p:tab id="finalList" title="Members List">
                           <p:panel header="Final Members List">


                                   <h:messages errorClass="error"/>
                                   <p:dataTable id="members" var="member" value="#{smsBean.memberDataModel}" paginator="true" rows="10"
                                                selection="#{smsBean.selectedMembers}">

                                       <f:facet name="header">
                                           Please UNTICK  members who to exclude in the sms
                                       </f:facet>

                                       <p:column selectionMode="multiple" style="width:2%" />

                                       <p:column headerText="Member's Name" style="width:25%">
                                           #{member.fullName}
                                       </p:column>

                                       <p:column headerText="Status" style="width:24%">
                                           #{member.status}
                                       </p:column>
                                      <!-- <f:facet name="footer">
                                           <p:commandButton id="present" value="Submit Register" icon="ui-icon-search"
                                                            action="#{smsBean.send}"    oncomplete="wiz.loadStep(wiz.cfg.steps[0], true);"/>
                                       </f:facet>-->
                                   </p:dataTable>


                           </p:panel>
                       </p:tab>
                       <p:tab id="sms" title="SMS">
                           <p:panel header="SMS Details">

                               <h:messages errorClass="error"/>

                               <h:panelGrid columns="2" columnClasses="label, value">
                                   <h3>Remaining Chars</h3>
                                   <p:inputTextarea rows="8" cols="50" counter="counter" maxlength="150"
                                                    counterTemplate="{0} characters remaining." autoResize="false" value="#{smsBean.sms}"/>
                                   <h:outputText id="counter" />
                                   <h:outputText value="Skip to last: " />
                                   <h:selectBooleanCheckbox value="#{smsBean.skip}" />
                               </h:panelGrid>
                           </p:panel>
                       </p:tab>
                       <p:tab id="confirm" title="Confirm">
                           <p:panel header="Confirmation">

                               <h:outputText value="SMS Message: " />
                               <h:outputText styleClass="outputLabel"
                                             value="#{smsBean.sms}" />

                               <p:commandButton value="Submit" update="growl"
                                                actionListener="#{smsBean.send}"/>
                           </p:panel>
                       </p:tab>
                   </p:wizard>

            </p:panel>
        </h:form>

    </ui:define>
</ui:composition>